{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/core/PrivateRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Navigate, Outlet, useNavigate } from \"react-router-dom\";\nimport Menu from \"./Menu\";\nimport Header from \"./Header\";\nimport Loader from \"./Loader\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { myUser } from \"../api/apiUser\";\nimport { userFill } from \"../redux/reducers/user/user.thunk\";\nimport { addToast } from \"../utils\";\nimport Footer from \"./Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = {\n  main: {\n    marginLeft: \"var(--sidebar-width)\",\n    padding: \"0 0.5rem\",\n    backgroundColor: \"var(--second-bg)\"\n  }\n};\n\nconst PrivateRoute = props => {\n  _s();\n\n  const navigate = useNavigate();\n  const currentUser_id = useSelector(state => state.user.currentUser.id);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!currentUser_id) {\n      (async () => {\n        try {\n          let res = await myUser();\n          console.log(res);\n\n          if (res.status === 200) {\n            dispatch(userFill(res.data));\n          } else {\n            localStorage.removeItem('token');\n            navigate('/signin');\n            addToast({\n              type: 'info',\n              title: 'Hey!',\n              message: `Bạn cần đăng nhập lại!`,\n              duration: 5000\n            });\n          }\n        } catch (error) {\n          alert(error.message);\n          navigate('/signin');\n        }\n      })();\n    } else {\n      // alert('Just login')\n      addToast({\n        type: 'success',\n        title: 'Thành công!',\n        message: `Chào cán bộ!`,\n        duration: 5000\n      });\n    }\n  }, []); // const [loading, setLoadding] = useState(true)\n  // const authed = isAuthenticated() // isauth() returns true or false based on localStorage\n  // lay cais user neeus cos roif thig thooi\n\n  if (!currentUser_id) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      style: style.main,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          minHeight: \"100vh\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"root-content\",\n          children: /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PrivateRoute, \"iwI2W4VA8GLOTPVxL/a5Umb/6wE=\", false, function () {\n  return [useNavigate, useSelector, useDispatch];\n});\n\n_c = PrivateRoute;\nexport default PrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"sources":["/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/core/PrivateRoute.js"],"names":["React","useEffect","useState","Navigate","Outlet","useNavigate","Menu","Header","Loader","useSelector","useDispatch","myUser","userFill","addToast","Footer","style","main","marginLeft","padding","backgroundColor","PrivateRoute","props","navigate","currentUser_id","state","user","currentUser","id","dispatch","res","console","log","status","data","localStorage","removeItem","type","title","message","duration","error","alert","minHeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState} from \"react\";\nimport { Navigate, Outlet, useNavigate  } from \"react-router-dom\";\nimport Menu from \"./Menu\";\nimport Header from \"./Header\";\nimport Loader from \"./Loader\"\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {myUser} from \"../api/apiUser\"\nimport {userFill} from \"../redux/reducers/user/user.thunk\"\nimport { addToast } from \"../utils\";\nimport Footer from \"./Footer\"\n\nconst style = {\n    main: {\n        marginLeft: \"var(--sidebar-width)\",\n        padding: \"0 0.5rem\",\n        backgroundColor: \"var(--second-bg)\",\n       \n    }\n}\nconst PrivateRoute = (props) => {\n    const navigate = useNavigate()\n    const currentUser_id = useSelector(state => state.user.currentUser.id)\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if (!currentUser_id) {\n            (async () => {\n                try {\n                    let res = await myUser()\n                    console.log(res)\n                    if (res.status === 200) {\n                        dispatch(userFill(res.data))\n                    } else {\n                        localStorage.removeItem('token')\n                        navigate('/signin')\n                        addToast({\n                            type:'info', \n                            title:'Hey!', \n                            message:`Bạn cần đăng nhập lại!`, \n                            duration: 5000\n                        })\n                    }\n                    \n                } catch (error) {\n                    alert(error.message)\n                    navigate('/signin')\n                }\n            })()\n        } else {\n            // alert('Just login')\n            addToast({\n                type:'success', \n                title:'Thành công!', \n                message:`Chào cán bộ!`, \n                duration: 5000\n            })\n        }\n    }, [])\n    // const [loading, setLoadding] = useState(true)\n    // const authed = isAuthenticated() // isauth() returns true or false based on localStorage\n    // lay cais user neeus cos roif thig thooi\n    if (! currentUser_id ) {\n        return <Loader />\n    }\n    return (\n\n        <div>\n            <Menu />\n            <main style={style.main}>\n                <div style={{ minHeight: \"100vh\"}}>\n                    <Header />\n                    <div className=\"root-content\">\n                    <Outlet />\n                    </div>\n                </div>\n                <Footer />\n\n            </main>\n\n        </div>\n    )\n}\n\nexport default PrivateRoute;"]},"metadata":{},"sourceType":"module"}