{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/views/ListAgencies/ListAgencies.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport TableExtra from '../../components/Table/TableExtra';\nimport { TableRow, TableCell } from '@mui/material';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { column_titles, searchByAgency } from '../../constants/agency/agency';\nimport { loadAgenciesAsync } from '../../redux/reducers/agencies/agencies.thunk';\nimport { Button } from '@mui/material';\nimport { Navigate, useNavigate } from 'react-router';\nimport AgencyForm from '../agency/AgencyForm';\nimport { userToggleCompletedDeclare } from \"../../redux/reducers/user/user.thunk\";\nimport { toggleCompletedDeclareApi } from \"../../api/apiAgencies\";\nimport { addToast } from \"../../utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  root: {\n    display: \"block\",\n    background: \"white\",\n    paddingTop: \"15vh\",\n    paddingLeft: \"17.36vw\"\n  },\n  header: {\n    marginBottom: \"2rem\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  }\n};\n\nconst ListAgencies = () => {\n  _s();\n\n  // const token = localStorage.getItem(\"token\");\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    agencies\n  } = useSelector(state => {\n    return state.agencies;\n  });\n  console.log(\"üöÄ ~ file: ListUser.js ~ line 23 ~ ListAgencies ~ subagencies\", agencies);\n  const {\n    currentUser\n  } = useSelector(state => state.user);\n  useEffect(() => {\n    console.log(\"call Agency\");\n\n    if (agencies.length === 0) {\n      dispatch(loadAgenciesAsync());\n    }\n  }, []); // const { currentUser } = useSelector(state => state.user);\n\n  const renderData = (item, index) => {\n    return /*#__PURE__*/_jsxDEV(TableRow, {\n      hover: true,\n      role: \"checkbox\",\n      tabIndex: -1,\n      onClick: () => navigate(`${item.id}`),\n      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n        children: item.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        children: item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        align: \"center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `badge ${item.staff.declared_permission ? 'badge-success' : 'badge-pending '}`,\n          children: item.staff.declared_permission ? 'ƒêang b·∫≠t' : 'ƒê√£ t·∫Øt'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        align: \"center\",\n        children: item.id.length !== 8 ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `badge ${item.completed_declare ? 'badge-success' : 'badge-pending '}`,\n          children: item.completed_declare ? 'ƒê√£ khai b√°o xong' : 'Ch∆∞a khai b√°o xong'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `badge badge-success`,\n          children: \"Do b\\u1EA1n gi\\xE1m s\\xE1t tr\\u1EF1c ti\\u1EBFp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  };\n\n  const toggleCompletedDeclare = () => {\n    (async () => {\n      try {\n        let res = await toggleCompletedDeclareApi();\n\n        if (res.status === 200) {\n          dispatch(userToggleCompletedDeclare(res.data.current));\n          addToast({\n            type: `${res.data.current ? 'success' : 'info'}`,\n            title: 'Xong!',\n            message: `${res.data.current ? \"Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh khai b√°o\" : \"·ªé. S·ªõm ho√†n th√†nh nh√©!\"}`,\n            duration: 5000\n          });\n        }\n      } catch (error) {}\n    })();\n  };\n\n  if (currentUser.level === \"4\") {\n    navigate('/');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-limit\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: currentUser && currentUser.level === \"3\" ? /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: toggleCompletedDeclare,\n          children: !currentUser.agency.completed_declare ? 'ƒê√°nh d·∫•u khai b√°o xong' : 'ƒê√°nh d·∫•u ch∆∞a khai b√°o xong'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 29\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), currentUser && currentUser.level <= \"3\" ? /*#__PURE__*/_jsxDEV(AgencyForm, {\n        label: \"Th\\xEAm \\u0111\\u01A1n v\\u1ECB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TableExtra, {\n      name: \"agencies\",\n      title: \"C\\xE1c \\u0111\\u01A1n v\\u1ECB d\\u01B0\\u1EDBi quy\\u1EC1n\",\n      data: agencies,\n      columns: column_titles,\n      searchBy: searchByAgency,\n      renderData: renderData,\n      searchEngine: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ListAgencies, \"qH05A0x1NL2sjKwJnONA/tz0qxo=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector];\n});\n\n_c = ListAgencies;\nexport default ListAgencies;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListAgencies\");","map":{"version":3,"sources":["/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/views/ListAgencies/ListAgencies.js"],"names":["React","useState","useEffect","TableExtra","TableRow","TableCell","useSelector","useDispatch","column_titles","searchByAgency","loadAgenciesAsync","Button","Navigate","useNavigate","AgencyForm","userToggleCompletedDeclare","toggleCompletedDeclareApi","addToast","styles","root","display","background","paddingTop","paddingLeft","header","marginBottom","alignItems","justifyContent","ListAgencies","dispatch","navigate","agencies","state","console","log","currentUser","user","length","renderData","item","index","id","name","staff","declared_permission","completed_declare","toggleCompletedDeclare","res","status","data","current","type","title","message","duration","error","level","agency"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport TableExtra from '../../components/Table/TableExtra';\nimport { TableRow, TableCell } from '@mui/material';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport {column_titles, searchByAgency} from '../../constants/agency/agency';\nimport { loadAgenciesAsync } from '../../redux/reducers/agencies/agencies.thunk';\nimport { Button } from '@mui/material';\nimport { Navigate, useNavigate } from 'react-router';\nimport AgencyForm from '../agency/AgencyForm';\nimport {userToggleCompletedDeclare} from \"../../redux/reducers/user/user.thunk\"\nimport {toggleCompletedDeclareApi } from \"../../api/apiAgencies\"\nimport {addToast} from \"../../utils\"\n\nconst styles = {\n    root: {\n        display: \"block\",\n        background: \"white\",\n        paddingTop: \"15vh\",\n        paddingLeft: \"17.36vw\"\n    },\n    header: {\n        marginBottom: \"2rem\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n    }\n};\n\n\nconst ListAgencies = () => {\n    // const token = localStorage.getItem(\"token\");\n    const dispatch = useDispatch();\n    const navigate = useNavigate()\n    const { agencies } = useSelector(state =>{\n        return state.agencies\n    } );\n    console.log(\"üöÄ ~ file: ListUser.js ~ line 23 ~ ListAgencies ~ subagencies\", agencies)\n    const {currentUser} = useSelector(state => state.user);\n\n    useEffect(() => {\n        console.log(\"call Agency\")\n        if (agencies.length === 0) {\n            dispatch(loadAgenciesAsync());\n        }\n    }, []);\n    // const { currentUser } = useSelector(state => state.user);\n    const renderData = (item, index) => {\n        return (\n            <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}\n                onClick={() => navigate(`${item.id}`)}\n            >\n                <TableCell>\n                  {item.id}\n                </TableCell>\n                <TableCell>\n                  {item.name}\n                </TableCell>\n                <TableCell align='center'>\n                    <span className={`badge ${item.staff.declared_permission? 'badge-success': 'badge-pending '}`}>\n                        {item.staff.declared_permission? 'ƒêang b·∫≠t':'ƒê√£ t·∫Øt'}\n                    </span>\n                 \n                </TableCell>\n                <TableCell align='center'>\n                    {\n                        item.id.length !== 8? (\n                            <span className={`badge ${item.completed_declare? 'badge-success': 'badge-pending '}`}>\n                                {item.completed_declare? 'ƒê√£ khai b√°o xong': 'Ch∆∞a khai b√°o xong'}\n                            </span>\n                        ):(\n                            <span className={`badge badge-success`}>\n                                Do b·∫°n gi√°m s√°t tr·ª±c ti·∫øp\n                            </span>\n                        )\n                    }\n                    \n                </TableCell>\n            </TableRow>\n        )\n    }\n\n    const toggleCompletedDeclare = () => {\n        (async () => {\n            try {\n                let res = await toggleCompletedDeclareApi()\n                if (res.status === 200) {\n                    dispatch(userToggleCompletedDeclare(res.data.current))\n                    addToast(\n                        {\n                            type:`${res.data.current? 'success': 'info'}`, \n                            title:'Xong!', \n                            message:`${res.data.current? \"Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh khai b√°o\":\"·ªé. S·ªõm ho√†n th√†nh nh√©!\"}`, \n                            duration: 5000}\n                        )\n                }\n                \n            } catch (error) {\n                \n            }\n        })()\n    }\n\n    if (currentUser.level === \"4\") {\n        navigate('/')\n    }\n    \n    return (\n        <div className=\"page-limit\">\n            <div style={styles.header}>\n                <div>\n                    {\n                        (currentUser && currentUser.level === \"3\")? (\n                            <Button variant='contained'\n                                onClick={toggleCompletedDeclare}\n                            >\n                                {!currentUser.agency.completed_declare? 'ƒê√°nh d·∫•u khai b√°o xong':'ƒê√°nh d·∫•u ch∆∞a khai b√°o xong'}\n                            </Button>\n                        ):null\n                    }\n                </div>\n                {\n                    currentUser && currentUser.level <= \"3\"? (\n                        <AgencyForm label=\"Th√™m ƒë∆°n v·ªã\"/>\n                    ):null\n                }\n            </div>\n           <TableExtra \n                name=\"agencies\"\n                title=\"C√°c ƒë∆°n v·ªã d∆∞·ªõi quy·ªÅn\"\n                data = {agencies}\n                columns = {column_titles}\n                searchBy = {searchByAgency}\n                renderData = {renderData}\n                searchEngine = {true}\n           />\n        </div>\n        \n    )\n}\n\nexport default ListAgencies;"]},"metadata":{},"sourceType":"module"}