{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/views/ListCitizens/AddCitizen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport { createTheme } from '@mui/material/styles';\nimport { ThemeProvider } from '@mui/material/styles';\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from '@date-io/date-fns';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormLabel from '@mui/material/FormLabel';\nimport { useNavigate } from 'react-router';\nimport { Ethnics } from \"../../constants/citizen/citizens\";\nimport { Religions } from \"../../constants/citizen/citizens\";\nimport { LearningLevels } from \"../../constants/citizen/citizens\";\nimport { Occupations } from \"../../constants/citizen/citizens\";\nimport { addCitizen } from \"../../api/apiCitizens\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport { appendCitizen } from '../../redux/reducers/citizens/citizens.thunk';\nimport { addToast } from \"../../utils\";\nimport { loadAgenciesAsync } from '../../redux/reducers/agencies/agencies.thunk';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet clicked = false;\n\nconst AddCitizen = () => {\n  _s();\n\n  const {\n    currentUser\n  } = useSelector(state => state.user);\n  const village_id = currentUser.agency.id;\n  const {\n    agencies\n  } = useSelector(state => {\n    return state.agencies;\n  });\n  var subAgencies = [];\n\n  for (var i = 0; i < agencies.length; i++) {\n    subAgencies.push(agencies[i].name);\n  }\n\n  const [declarePermission, setDeclarePermission] = useState(currentUser.declared_permission);\n  useEffect(() => {\n    if (agencies.length === 0) {\n      dispatch(loadAgenciesAsync());\n    }\n  }, []);\n  useEffect(() => {\n    console.log(declarePermission);\n\n    if (currentUser.declared_permission !== declarePermission) {\n      setDeclarePermission(!declarePermission);\n    }\n\n    console.log(declarePermission);\n  }, [currentUser, declarePermission]);\n  const theme = createTheme({\n    palette: {\n      primary: {\n        main: \"#2E3192\"\n      }\n    }\n  });\n\n  const allIsNumber = word => {\n    for (var x = 0; x < word.length; x++) {\n      if (!/\\d/.test(word[x])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const mapSubAgenciesId = agency => {\n    if (typeof agency !== 'undefined') {\n      if (currentUser.level === \"4\") {\n        if (allIsNumber(agency)) {\n          return currentUser.agency.name;\n        } else {\n          return village_id;\n        }\n      } else if (allIsNumber(agency)) {\n        for (var i = 0; i < agencies.length; i++) {\n          if (agencies[i].id === agency) {\n            return agencies[i].name;\n          }\n        }\n      } else {\n        for (var j = 0; j < agencies.length; j++) {\n          if (agencies[j].name === agency) {\n            return agencies[j].id;\n          }\n        }\n      }\n    }\n  };\n\n  const citizenById = {\n    id: \"\",\n    id_number: \"\",\n    name: \"\",\n    dob: new Date().toLocaleDateString('en-CA'),\n    gender: \"male\",\n    ethnic: \"Kinh\",\n    religion: \"Không\",\n    educational: \"none\",\n    declarer: \"\",\n    occupations: \"Nhà chuyên môn bậc cao (đại học trở lên)\",\n    village_id: mapSubAgenciesId(subAgencies[0]),\n    home_town: \"\",\n    address_line1: \"\",\n    address_line2: \"\"\n  };\n  const error = {\n    id_number: \"\",\n    name: \"\",\n    home_town: \"\",\n    address_line1: \"\",\n    address_line2: \"\"\n  };\n  const [citizen, setData] = useState(citizenById);\n  const [er, setError] = useState(error);\n  const [inputAddress_line1, setInputAddress_line1] = React.useState('');\n  const [inputAddress_line2, setInputAddress_line2] = React.useState('');\n  const styles = {\n    root: {\n      width: \"45vw\",\n      background: \"white\",\n      borderRadius: \"10px\",\n      padding: \"40px\"\n    },\n    title: {\n      fontWeight: \"bold\",\n      fontSize: \"25px\"\n    },\n    marginRight: {\n      marginRight: \"1vw\"\n    }\n  };\n\n  const formatEducational = learningLevel => {\n    if (learningLevel === \"Không\") {\n      return \"none\";\n    } else if (learningLevel === \"Tiểu học\") {\n      return \"primary\";\n    } else if (learningLevel === \"Trung học cơ sở\") {\n      return \"secondary\";\n    } else if (learningLevel === \"Trung học phổ thông\") {\n      return \"high\";\n    } else if (learningLevel === \"Cao đẳng / Đại học\") {\n      return \"university\";\n    } else if (learningLevel === \"Sau đại học\") {\n      return \"master\";\n    } else if (learningLevel === \"none\") {\n      return \"Không\";\n    } else if (learningLevel === \"secondary\") {\n      return \"Trung học cơ sở\";\n    } else if (learningLevel === \"high\") {\n      return \"Trung học phổ thông\";\n    } else if (learningLevel === \"university\") {\n      return \"Cao đẳng / Đại học\";\n    } else if (learningLevel === \"master\") {\n      return \"Sau đại học\";\n    }\n  };\n\n  const dispatch = useDispatch();\n\n  const handleChangeValue = e => {\n    // village_id \n    if (!isNaN(Date.parse(e))) {\n      setData({ ...citizen,\n        dob: new Date(e).toLocaleDateString('en-CA')\n      });\n    } else if (e.target.name === \"educational\") {\n      setData({ ...citizen,\n        educational: e.target.value\n      });\n    } else if (e.target.value === \"male\" || e.target.value === \"female\") {\n      setData({ ...citizen,\n        gender: e.target.value\n      });\n    } else if (e.target.name === \"village_id\") {\n      setData({ ...citizen,\n        village_id: mapSubAgenciesId(e.target.value)\n      });\n    } else {\n      const name = e.target.name || e.target.id;\n      setData({ ...citizen,\n        [name]: e.target.value\n      });\n    }\n  };\n\n  const handleSubmit = event => {\n    if (clicked) {\n      console.log(\"return\");\n      return;\n    }\n\n    clicked = true;\n    let err = validateBeforeSubmit();\n\n    if (err.name === \"\" && err.id_number === \"\" && err.home_town === \"\" && err.address_line1 === \"\" && err.address_line2 === \"\") {\n      let temp = citizen;\n      temp.address_line1 = inputAddress_line1;\n      temp.address_line2 = inputAddress_line2;\n\n      (async () => {\n        try {\n          let res = await addCitizen(temp);\n\n          if (res.status === 200) {\n            dispatch(appendCitizen(res.data));\n            addToast({\n              type: 'success',\n              title: 'Xong!',\n              message: `Khai báo công dân thành công.`,\n              duration: 5000\n            });\n            handleResetInput();\n          } else {\n            addToast({\n              type: 'error',\n              title: 'Hỏng!',\n              message: `Đã xảy ra lỗi khi thêm công dân.`,\n              duration: 5000\n            });\n          }\n\n          clicked = false;\n        } catch (e) {\n          clicked = false;\n\n          if (e.response && e.response.data && e.response.data.id_number) {\n            if (e.response.data.id_number[0] === \"{'citizen width this id_number has exist'}\") {\n              setError({ ...error,\n                id_number: \"Số CMND/CCCD đã tồn tại!\"\n              });\n            }\n          }\n        }\n      })();\n    } else {\n      clicked = false;\n      setError(err);\n    }\n  };\n\n  const containUpperCase = word => {\n    if (/[ÁÀÃẢẠĂẮẰẲẴẶÂẤẦẨẪẬĐÉÈẺẼẸÊẾỀỂỄỆÍÌỈĨỊÔỐỒỔỖỘƠỚỜỞỠỢÓÒÕỎỌƯỨỪỬỮỰÚÙỦŨỤÝỲỶỸỴA-Z]/.test(word)) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const containLowerCase = word => {\n    if (/[aàảãáạăằẳẵắặâầẩẫấậbcdđeèẻẽéẹêềểễếệfghiìỉĩíịjklmnoòỏõóọôồổỗốộơờởỡớợpqrstuùủũúụưừửữứựvwxyỳỷỹýỵz]/.test(word)) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const containSpecialCharacter = word => {\n    // except for white-space\n    for (var x = 0; x < word.length; x++) {\n      if (!containLowerCase(word[x]) && !containUpperCase(word[x]) && !/\\d/.test(word[x]) && !/\\s/.test(word[x])) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  const validateNameInput = () => {\n    const content = citizen.name;\n    const words = content.split(/\\s/);\n\n    if (content === '') {\n      setError({ ...er,\n        name: \"Không được để trống!\"\n      });\n      return \"Không được để trống!\";\n    } else if (content[0] === \" \") {\n      setError({ ...er,\n        name: \"Không được bắt đầu bằng khoảng trắng!\"\n      });\n      return \"Không được bắt đầu bằng khoảng trắng!\";\n    } else if (content[content.length - 1] === \" \") {\n      setError({ ...er,\n        name: \"Không được kết thúc bằng khoảng trắng!\"\n      });\n      return \"Không được kết thúc bằng khoảng trắng!\";\n    } else if (/\\d/.test(content)) {\n      setError({ ...er,\n        name: \"Không được chứa chữ số!\"\n      });\n      return \"Không được chứa chữ số!\";\n    } else if (containLowerCase(content[0]) || containLowerCase(words[words.length - 1][0])) {\n      setError({ ...er,\n        name: \"Viết hoa ký tự đầu tiên của mỗi từ!\"\n      });\n      return \"Viết hoa ký tự đầu tiên của mỗi từ!\";\n    } else if (content.length > 1 && containUpperCase(content.substr(1)) && words.length < 2 || words[words.length - 1].length > 1 && containUpperCase(words[words.length - 1].substr(1))) {\n      setError({ ...er,\n        name: \"Chỉ viết hoa chữ cái đầu tiên của từ!\"\n      });\n      return \"Chỉ viết hoa chữ cái đầu tiên của từ!\";\n    } else if (containSpecialCharacter(content)) {\n      setError({ ...er,\n        name: \"Không được chứa ký tự đặc biệt!\"\n      });\n      return \"Không được chứa ký tự đặc biệt!\";\n    } else if (content.split(/\\s/).length - 1 < 1) {\n      setError({ ...er,\n        name: \"Ít nhất 2 từ đơn!\"\n      });\n      return \"Ít nhất 2 từ đơn!\";\n    } else {\n      setError({ ...er,\n        name: \"\"\n      });\n      return \"\";\n    }\n  };\n\n  const validateId_numberInput = () => {\n    const content = citizen.id_number;\n\n    if (allIsNumber(content) === false) {\n      setError({ ...er,\n        id_number: \"Chỉ được chứa chữ số!\"\n      });\n      return \"Chỉ được chứa chữ số!\";\n    } else if (0 < content.length && content.length < 9) {\n      setError({ ...er,\n        id_number: \"Số CMND/CCCD phải đủ 9/12 chữ số hoặc để trống khi chưa được cấp!\"\n      });\n      return \"Số CMND/CCCD phải đủ 9/12 chữ số hoặc để trống khi chưa được cấp!\";\n    } else if (9 < content.length && content.length < 12) {\n      setError({ ...er,\n        id_number: \"Số CCCD phải đủ 12 chữ số!\"\n      });\n      return \"Số CCCD phải đủ 12 chữ số!\";\n    } else if (content.length > 12) {\n      setError({ ...er,\n        id_number: \"Không hợp lệ!\"\n      });\n      return \"Không hợp lệ!\";\n    } else {\n      setError({ ...er,\n        id_number: \"\"\n      });\n      return \"\";\n    }\n  };\n\n  const validateHomeTownInput = () => {\n    const content = citizen.home_town;\n\n    if (content === '') {\n      setError({ ...er,\n        home_town: \"Không được để trống!\"\n      });\n      return \"Không được để trống!\";\n    } else {\n      setError({ ...er,\n        home_town: \"\"\n      });\n      return \"\";\n    }\n  };\n\n  const validateAddress_line1Input = () => {\n    const content = inputAddress_line1;\n\n    if (content === '') {\n      setError({ ...er,\n        address_line1: \"Không được để trống!\"\n      });\n      return \"Không được để trống!\";\n    } else {\n      setError({ ...er,\n        address_line1: \"\"\n      });\n      return \"\";\n    }\n  };\n\n  const validateAddress_line2Input = () => {\n    const content = inputAddress_line2;\n\n    if (content === '') {\n      setError({ ...er,\n        address_line2: \"Không được để trống!\"\n      });\n      return \"Không được để trống!\";\n    } else {\n      setError({ ...er,\n        address_line2: \"\"\n      });\n      return \"\";\n    }\n  };\n\n  const validateBeforeSubmit = () => {\n    let err = {};\n    err.name = validateNameInput();\n    err.id_number = validateId_numberInput();\n    err.home_town = validateHomeTownInput();\n    err.address_line1 = validateAddress_line1Input();\n    err.address_line2 = validateAddress_line2Input();\n    return err;\n  };\n\n  if (village_id.length === 8) {\n    subAgencies.push(mapSubAgenciesId(village_id));\n  }\n\n  const handleResetInput = event => {\n    setInputAddress_line1(\"\");\n    setInputAddress_line2(\"\");\n    setData(citizenById);\n    setError(error);\n  };\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    handleResetInput();\n    setData({ ...citizen,\n      village_id: mapSubAgenciesId(subAgencies[0])\n    });\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    handleResetInput();\n  };\n\n  if (!declarePermission) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: handleClickOpen,\n      children: \"Khai b\\xE1o c\\xF4ng d\\xE2n m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        style: styles.title,\n        children: \"Khai b\\xE1o c\\xF4ng d\\xE2n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n          theme: theme,\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              error: er.name !== \"\",\n              helperText: er.name !== \"\" ? er.name : \"\",\n              value: citizen.name,\n              id: \"name\",\n              margin: \"dense\",\n              name: \"name\",\n              label: \"H\\u1ECD v\\xE0 t\\xEAn\",\n              variant: \"standard\",\n              onChange: handleChangeValue,\n              onBlur: validateNameInput,\n              style: {\n                width: \"100%\"\n              },\n              inputProps: {\n                style: {\n                  fontSize: \"17px\"\n                }\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                width: \"100%\",\n                marginTop: \"1.5vh\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                component: \"fieldset\",\n                style: {\n                  width: \"30%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                  component: \"legend\",\n                  style: {\n                    fontSize: \"13px\"\n                  },\n                  children: \"Gi\\u1EDBi t\\xEDnh *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n                  row: true,\n                  \"aria-label\": \"gender\",\n                  id: \"gender\",\n                  value: citizen.gender,\n                  onChange: handleChangeValue,\n                  children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"male\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 485,\n                      columnNumber: 59\n                    }, this),\n                    label: \"Nam\",\n                    style: {\n                      marginRight: \"10px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"female\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 486,\n                      columnNumber: 61\n                    }, this),\n                    label: \"N\\u1EEF\",\n                    style: {\n                      marginRight: 0\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n                utils: DateFnsUtils,\n                children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                  id: \"dob\",\n                  style: {\n                    width: \"30%\"\n                  },\n                  disableFuture: true,\n                  autoOk: true,\n                  openTo: \"year\",\n                  format: \"dd/MM/yyyy\",\n                  label: \"Ng\\xE0y sinh *\",\n                  views: [\"year\", \"month\", \"date\"],\n                  value: citizen.dob,\n                  onChange: handleChangeValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                error: er.id_number !== \"\",\n                helperText: er.id_number ? er.id_number : \"\",\n                value: citizen.id_number,\n                style: {\n                  width: \"30%\"\n                },\n                id: \"id_number\",\n                label: \"S\\u1ED1 CCCD/CMND\",\n                variant: \"standard\",\n                onChange: handleChangeValue,\n                onBlur: validateId_numberInput,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                width: \"100%\",\n                marginTop: \"1.5vh\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"standard\",\n                sx: {\n                  m: 1\n                },\n                style: {\n                  width: \"30%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"D\\xE2n t\\u1ED9c *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"ethnic\",\n                  value: citizen.ethnic,\n                  label: \"D\\xE2n t\\u1ED9c\",\n                  onChange: handleChangeValue,\n                  children: Ethnics.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: item\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 50\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"standard\",\n                sx: {\n                  m: 1\n                },\n                style: {\n                  width: \"30%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"T\\xF4n gi\\xE1o *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"religion\",\n                  value: citizen.religion,\n                  label: \"T\\xF4n gi\\xE1o\",\n                  onChange: handleChangeValue,\n                  children: Religions.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: item\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 50\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"standard\",\n                sx: {\n                  m: 1\n                },\n                style: {\n                  width: \"30%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Tr\\xECnh \\u0111\\u1ED9 h\\u1ECDc v\\u1EA5n *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"educational\",\n                  value: citizen.educational,\n                  label: \"Tr\\xECnh \\u0111\\u1ED9 h\\u1ECDc v\\u1EA5n\",\n                  onChange: handleChangeValue,\n                  children: LearningLevels.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item.value,\n                    children: item.name\n                  }, item.value, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 552,\n                    columnNumber: 55\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                width: \"100%\",\n                marginTop: \"3vh\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"standard\",\n                sx: {\n                  m: 1\n                },\n                style: {\n                  width: \"47%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Ngh\\u1EC1 nghi\\u1EC7p *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"occupations\",\n                  value: citizen.occupations,\n                  label: \"Ngh\\u1EC1 nghi\\u1EC7p\",\n                  onChange: handleChangeValue,\n                  children: Occupations.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: item\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 567,\n                    columnNumber: 52\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"standard\",\n                sx: {\n                  m: 1\n                },\n                style: {\n                  width: \"47%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Th\\xF4n/B\\u1EA3n/T\\u1ED5 *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"village_id\",\n                  value: mapSubAgenciesId(citizen.village_id),\n                  label: \"Th\\xF4n/B\\u1EA3n/T\\u1ED5\",\n                  onChange: handleChangeValue,\n                  inputProps: {\n                    disabled: currentUser.level === \"4\"\n                  },\n                  children: subAgencies.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: item\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 583,\n                    columnNumber: 54\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              error: er.home_town !== \"\",\n              helperText: er.home_town ? er.home_town : \"\",\n              style: {\n                marginTop: \"3vh\"\n              },\n              id: \"home_town\",\n              value: citizen.home_town,\n              onChange: handleChangeValue,\n              onBlur: validateHomeTownInput,\n              label: \"Qu\\xEA qu\\xE1n\",\n              inputProps: {\n                style: {\n                  fontSize: \"17px\"\n                }\n              },\n              fullWidth: true,\n              variant: \"standard\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n              id: \"free-solo-demo1\",\n              sx: {\n                '& input': {\n                  height: 22,\n                  fontSize: \"17px\"\n                }\n              },\n              freeSolo: true,\n              options: currentUser.agency.stringName ? [currentUser.agency.stringName] : [],\n              inputValue: inputAddress_line1,\n              onInputChange: (event, newInputValue) => {\n                setInputAddress_line1(newInputValue);\n              },\n              renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n                error: er.address_line1 !== \"\",\n                helperText: er.address_line1 ? er.address_line1 : \"\",\n                id: \"address_line1\",\n                style: {\n                  marginTop: \"3vh\"\n                },\n                fullWidth: true,\n                onBlur: validateAddress_line1Input,\n                variant: \"standard\",\n                ...params,\n                label: \"\\u0110\\u1ECBa ch\\u1EC9 t\\u1EA1m tr\\xFA\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n              id: \"free-solo-demo2\",\n              sx: {\n                '& input': {\n                  height: 22,\n                  fontSize: \"17px\"\n                }\n              },\n              freeSolo: true,\n              options: currentUser.agency.stringName ? [currentUser.agency.stringName] : [],\n              inputValue: inputAddress_line2,\n              onInputChange: (event, newInputValue) => {\n                setInputAddress_line2(newInputValue);\n                console.log(newInputValue);\n              },\n              renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n                error: er.address_line2 !== \"\",\n                helperText: er.address_line2 ? er.address_line2 : \"\",\n                id: \"address_line2\",\n                style: {\n                  marginTop: \"3vh\"\n                },\n                fullWidth: true,\n                onBlur: validateAddress_line2Input,\n                variant: \"standard\",\n                ...params,\n                label: \"\\u0110\\u1ECBa ch\\u1EC9 t\\u1EA1m tr\\xFA\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            background: \"lightgrey\",\n            color: \"black\"\n          },\n          onClick: handleResetInput,\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            background: \"#2E3192\",\n            color: \"white\",\n            marginLeft: \"10px\"\n          },\n          type: \"submit\",\n          onClick: handleSubmit,\n          children: \"Th\\xEAm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 453,\n    columnNumber: 7\n  }, this);\n};\n\n_s(AddCitizen, \"0TO5ttfMB+mYRn5RBXjn7cg50pE=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = AddCitizen;\nexport default AddCitizen;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddCitizen\");","map":{"version":3,"sources":["/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/views/ListCitizens/AddCitizen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","Button","TextField","createTheme","ThemeProvider","DatePicker","MuiPickersUtilsProvider","DateFnsUtils","FormControlLabel","InputLabel","MenuItem","FormControl","Select","Radio","RadioGroup","FormLabel","useNavigate","Ethnics","Religions","LearningLevels","Occupations","addCitizen","Dialog","DialogActions","DialogContent","DialogTitle","appendCitizen","addToast","loadAgenciesAsync","Autocomplete","clicked","AddCitizen","currentUser","state","user","village_id","agency","id","agencies","subAgencies","i","length","push","name","declarePermission","setDeclarePermission","declared_permission","dispatch","console","log","theme","palette","primary","main","allIsNumber","word","x","test","mapSubAgenciesId","level","j","citizenById","id_number","dob","Date","toLocaleDateString","gender","ethnic","religion","educational","declarer","occupations","home_town","address_line1","address_line2","error","citizen","setData","er","setError","inputAddress_line1","setInputAddress_line1","inputAddress_line2","setInputAddress_line2","styles","root","width","background","borderRadius","padding","title","fontWeight","fontSize","marginRight","formatEducational","learningLevel","handleChangeValue","e","isNaN","parse","target","value","handleSubmit","event","err","validateBeforeSubmit","temp","res","status","data","type","message","duration","handleResetInput","response","containUpperCase","containLowerCase","containSpecialCharacter","validateNameInput","content","words","split","substr","validateId_numberInput","validateHomeTownInput","validateAddress_line1Input","validateAddress_line2Input","open","setOpen","handleClickOpen","handleClose","style","display","justifyContent","marginTop","m","map","item","index","disabled","height","stringName","newInputValue","params","color","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport {createTheme} from '@mui/material/styles';\nimport { ThemeProvider } from '@mui/material/styles';\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from '@date-io/date-fns';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormLabel from '@mui/material/FormLabel';\nimport { useNavigate } from 'react-router';\nimport { Ethnics } from \"../../constants/citizen/citizens\";\nimport { Religions } from \"../../constants/citizen/citizens\";\nimport { LearningLevels } from \"../../constants/citizen/citizens\";\nimport { Occupations } from \"../../constants/citizen/citizens\";\nimport { addCitizen } from \"../../api/apiCitizens\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport { appendCitizen } from '../../redux/reducers/citizens/citizens.thunk';\nimport {addToast} from \"../../utils\"\nimport { loadAgenciesAsync } from '../../redux/reducers/agencies/agencies.thunk';\nimport Autocomplete from '@mui/material/Autocomplete';\n\nlet clicked = false\n\nconst AddCitizen = () => {\n  const {currentUser} = useSelector(state => state.user);\n  const village_id = currentUser.agency.id;\n  const { agencies } = useSelector(state => {\n    return state.agencies\n  });\n  var subAgencies = [];\n  for(var i = 0; i < agencies.length; i++) {\n    subAgencies.push(agencies[i].name);\n  }\n  const [declarePermission, setDeclarePermission] = useState(currentUser.declared_permission);\n  useEffect(() => {\n    if (agencies.length === 0) {\n      dispatch(loadAgenciesAsync());\n    }\n  }, []);\n\n  useEffect(() => {\n    console.log(declarePermission)\n    if (currentUser.declared_permission !== declarePermission) {\n      setDeclarePermission(!declarePermission);\n    }\n    console.log(declarePermission)\n  }, [currentUser, declarePermission]);\n\n  const theme = createTheme({\n        palette: {\n            primary: {\n                main: \"#2E3192\",\n            },\n        },\n  });\n  const allIsNumber = (word) => {\n    for (var x = 0; x < word.length; x++) {\n      if (!/\\d/.test(word[x])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  const mapSubAgenciesId = (agency) => {\n    if (typeof agency !== 'undefined') {\n      if (currentUser.level === \"4\") {\n        if (allIsNumber(agency)) {\n          return currentUser.agency.name\n        } else {\n          return village_id;\n        }\n      } else if (allIsNumber(agency)) {\n        for (var i = 0; i < agencies.length; i++) {\n          if (agencies[i].id === agency) {\n            return agencies[i].name;\n          }\n        }\n      } else {\n        for (var j = 0; j < agencies.length; j++) {\n          if (agencies[j].name === agency) {\n            return agencies[j].id;\n          }\n        }\n      }\n    }\n  }\n  const citizenById = {\n    id: \"\",\n    id_number: \"\",\n    name: \"\",\n    dob: new Date().toLocaleDateString('en-CA'),\n    gender: \"male\",\n    ethnic: \"Kinh\",\n    religion: \"Không\",\n    educational: \"none\",\n    declarer: \"\",\n    occupations: \"Nhà chuyên môn bậc cao (đại học trở lên)\",\n    village_id: mapSubAgenciesId(subAgencies[0]),\n    home_town: \"\",\n    address_line1: \"\",\n    address_line2: \"\",\n  };\n  const error = {\n    id_number: \"\",\n    name: \"\",\n    home_town: \"\",\n    address_line1: \"\",\n    address_line2: \"\",\n  }\n\n  const [citizen, setData] = useState(citizenById);\n  const [er, setError] = useState(error);\n  const [inputAddress_line1, setInputAddress_line1] = React.useState('');\n  const [inputAddress_line2, setInputAddress_line2] = React.useState('');\n\n  const styles = {\n        root: {\n            width: \"45vw\",\n            background: \"white\",\n            borderRadius: \"10px\",\n            padding: \"40px\"\n        },\n        title: {\n            fontWeight: \"bold\",\n            fontSize: \"25px\",\n        },\n        marginRight: {\n          marginRight: \"1vw\"\n        }\n  }\n\n  const formatEducational = (learningLevel) => {\n    if (learningLevel === \"Không\") {\n      return \"none\";\n    } else if (learningLevel === \"Tiểu học\") {\n      return \"primary\";\n    } else if (learningLevel === \"Trung học cơ sở\") {\n      return \"secondary\";\n    } else if (learningLevel === \"Trung học phổ thông\") {\n      return \"high\";\n    } else if (learningLevel === \"Cao đẳng / Đại học\") {\n      return \"university\";\n    } else if (learningLevel === \"Sau đại học\") {\n      return \"master\";\n    } else if (learningLevel === \"none\") {\n      return \"Không\";\n    } else if (learningLevel === \"secondary\") {\n      return \"Trung học cơ sở\";\n    } else if (learningLevel === \"high\") {\n      return \"Trung học phổ thông\";\n    } else if (learningLevel === \"university\") {\n      return \"Cao đẳng / Đại học\";\n    } else if (learningLevel === \"master\") {\n      return \"Sau đại học\";\n    } \n  }\n\n  const dispatch = useDispatch()\n  \n  const handleChangeValue = (e) => {\n    // village_id \n    if (!isNaN(Date.parse(e))) {\n      setData({\n        ...citizen,\n        dob: new Date(e).toLocaleDateString('en-CA')\n      });\n    } else if (e.target.name === \"educational\") {\n      setData({\n        ...citizen,\n        educational: e.target.value\n      });\n    } else if (e.target.value === \"male\" || e.target.value === \"female\") {\n      setData({\n        ...citizen,\n        gender: e.target.value\n      })\n    } else if (e.target.name === \"village_id\") {\n      setData({\n        ...citizen,\n        village_id: mapSubAgenciesId(e.target.value)\n      })\n    } else {\n      const name = (e.target.name || e.target.id);\n      setData({\n        ...citizen,\n        [name]: e.target.value,\n      });\n    }\n  };\n\n  \n  const handleSubmit = (event) => {\n    if (clicked) {\n      console.log(\"return\")\n      return \n    }\n    clicked = true\n    let err = validateBeforeSubmit();\n    if (err.name === \"\" && err.id_number === \"\" && err.home_town === \"\" && err.address_line1 === \"\" && err.address_line2 === \"\") {\n      let temp = citizen;\n      temp.address_line1 = inputAddress_line1;\n      temp.address_line2 = inputAddress_line2;\n      (async () => {\n        try {\n          let res = await addCitizen(temp);\n          if (res.status === 200) {\n            dispatch(appendCitizen(res.data));\n            addToast({type:'success', title:'Xong!', message:`Khai báo công dân thành công.`, duration: 5000});\n            handleResetInput();\n          } else {\n            addToast({type:'error', title:'Hỏng!', message:`Đã xảy ra lỗi khi thêm công dân.`, duration: 5000})\n          }\n          clicked = false\n        } catch (e) {\n          clicked = false\n          if (e.response && e.response.data && e.response.data.id_number) {\n            if(e.response.data.id_number[0] === \"{'citizen width this id_number has exist'}\") {\n              setError({\n                ...error,\n                id_number: \"Số CMND/CCCD đã tồn tại!\",\n              });\n            }\n          }\n        }\n      })();\n    } else {\n      clicked = false\n      setError(err);\n    }\n  }\n    \n  const containUpperCase = (word) => {\n    if (/[ÁÀÃẢẠĂẮẰẲẴẶÂẤẦẨẪẬĐÉÈẺẼẸÊẾỀỂỄỆÍÌỈĨỊÔỐỒỔỖỘƠỚỜỞỠỢÓÒÕỎỌƯỨỪỬỮỰÚÙỦŨỤÝỲỶỸỴA-Z]/.test(word)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  const containLowerCase = (word) => {\n    if (/[aàảãáạăằẳẵắặâầẩẫấậbcdđeèẻẽéẹêềểễếệfghiìỉĩíịjklmnoòỏõóọôồổỗốộơờởỡớợpqrstuùủũúụưừửữứựvwxyỳỷỹýỵz]/.test(word)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  const containSpecialCharacter = (word) => {\n    // except for white-space\n    for (var x = 0; x < word.length; x++) {\n      if (!containLowerCase(word[x]) && !containUpperCase(word[x]) && !/\\d/.test(word[x]) && !/\\s/.test(word[x])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  const validateNameInput = () => {\n    const content = citizen.name;\n    const words = content.split(/\\s/);\n    if (content === '') {\n      setError({\n        ...er,\n        name: \"Không được để trống!\"\n      })\n      return \"Không được để trống!\";\n    } else if (content[0] === \" \") {\n      setError({\n        ...er,\n        name: \"Không được bắt đầu bằng khoảng trắng!\"\n      })\n      return \"Không được bắt đầu bằng khoảng trắng!\";\n    } else if (content[content.length - 1] === \" \") {\n      setError({\n        ...er,\n        name: \"Không được kết thúc bằng khoảng trắng!\"\n      })\n      return \"Không được kết thúc bằng khoảng trắng!\";\n    } else if (/\\d/.test(content)) {\n      setError({\n        ...er,\n        name: \"Không được chứa chữ số!\"\n      })\n      return \"Không được chứa chữ số!\";\n    } else if (containLowerCase(content[0]) || containLowerCase(words[words.length - 1][0])) {\n      setError({\n        ...er,\n        name: \"Viết hoa ký tự đầu tiên của mỗi từ!\"\n      })\n      return \"Viết hoa ký tự đầu tiên của mỗi từ!\";\n    } else if ((content.length > 1 && containUpperCase(content.substr(1)) && words.length < 2) || (words[words.length - 1].length > 1 && containUpperCase(words[words.length - 1].substr(1)))) {\n      setError({\n        ...er,\n        name: \"Chỉ viết hoa chữ cái đầu tiên của từ!\"\n      })\n      return \"Chỉ viết hoa chữ cái đầu tiên của từ!\";\n    } else if (containSpecialCharacter(content)) {\n      setError({\n        ...er,\n        name: \"Không được chứa ký tự đặc biệt!\"\n      })\n      return \"Không được chứa ký tự đặc biệt!\";\n    } else if (content.split(/\\s/).length - 1 < 1) {\n      setError({\n        ...er,\n        name: \"Ít nhất 2 từ đơn!\"\n      })\n      return \"Ít nhất 2 từ đơn!\";\n    } else {\n      setError({\n        ...er,\n        name: \"\"\n      })\n      return \"\";\n    }\n  }\n\n  const validateId_numberInput = () => {\n    const content = citizen.id_number;\n    if (allIsNumber(content) === false) {\n      setError({\n        ...er,\n        id_number: \"Chỉ được chứa chữ số!\"\n      })\n      return \"Chỉ được chứa chữ số!\";\n    } else if (0 < content.length && content.length < 9) {\n      setError({\n        ...er,\n        id_number: \"Số CMND/CCCD phải đủ 9/12 chữ số hoặc để trống khi chưa được cấp!\"\n      })\n      return \"Số CMND/CCCD phải đủ 9/12 chữ số hoặc để trống khi chưa được cấp!\";\n    } else if (9 < content.length && content.length < 12) {\n      setError({\n        ...er,\n        id_number: \"Số CCCD phải đủ 12 chữ số!\"\n      })\n      return \"Số CCCD phải đủ 12 chữ số!\";\n    } else if (content.length > 12) {\n      setError({\n        ...er,\n        id_number: \"Không hợp lệ!\"\n      })\n      return \"Không hợp lệ!\";\n    } else {\n      setError({\n        ...er,\n        id_number: \"\"\n      })\n      return \"\"\n    }\n  }\n\n  const validateHomeTownInput = () => {\n    const content = citizen.home_town;\n    if (content === '') {\n      setError({\n        ...er,\n        home_town: \"Không được để trống!\"\n      })\n      return \"Không được để trống!\";\n    } else {\n      setError({\n        ...er,\n        home_town: \"\"\n      })\n      return \"\";\n    }\n  };\n\n  const validateAddress_line1Input = () => {\n    const content = inputAddress_line1;\n    if (content === '') {\n      setError({\n        ...er,\n        address_line1: \"Không được để trống!\"\n      })\n      return \"Không được để trống!\";\n    } else {\n      setError({\n        ...er,\n        address_line1: \"\"\n      })\n      return \"\";\n    }\n  };\n\n  const validateAddress_line2Input = () => {\n    const content = inputAddress_line2;\n    if (content === '') {\n      setError({\n        ...er,\n        address_line2: \"Không được để trống!\"\n      })\n      return \"Không được để trống!\";\n    } else {\n      setError({\n        ...er,\n        address_line2: \"\"\n      })\n      return \"\";\n    }\n  };\n\n  const validateBeforeSubmit = () => {\n    let err = {}\n    err.name = validateNameInput();\n    err.id_number = validateId_numberInput();\n    err.home_town = validateHomeTownInput();\n    err.address_line1 = validateAddress_line1Input();\n    err.address_line2 = validateAddress_line2Input();\n    return err;\n  }\n\n  if (village_id.length === 8) {\n    subAgencies.push(mapSubAgenciesId(village_id));\n  }\n\n  const handleResetInput = (event) => {\n    setInputAddress_line1(\"\");\n    setInputAddress_line2(\"\");\n    setData(citizenById);\n    setError(error);\n  }\n\n  const [open, setOpen] = React.useState(false)\n  const handleClickOpen = () => {\n    handleResetInput();\n    setData({\n      ...citizen,\n      village_id: mapSubAgenciesId(subAgencies[0])\n    })\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    handleResetInput();\n  };\n\n  if (!declarePermission) {\n    return null\n  }\n    return (\n      <div>\n        <Button variant=\"contained\" onClick={handleClickOpen}>\n          Khai báo công dân mới \n        </Button>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle style={styles.title}>Khai báo công dân</DialogTitle>\n        <DialogContent>\n        <ThemeProvider theme={theme}>\n          <form>\n              <TextField   \n                error= {er.name !== \"\"}\n                helperText = {er.name !== \"\"? er.name:\"\"}\n                value={citizen.name}\n                id=\"name\" \n                margin=\"dense\"\n                name=\"name\" \n                label=\"Họ và tên\"\n                variant=\"standard\"\n                onChange={handleChangeValue}\n                onBlur={validateNameInput}\n                style={{width: \"100%\"}}\n                inputProps={{\n                  style: {\n                    fontSize: \"17px\",\n                  }\n                }}\n                required\n              />\n              <div style={{display: \"flex\", justifyContent: \"space-between\", width: \"100%\", marginTop: \"1.5vh\"}}>\n              <FormControl component=\"fieldset\" style={{width: \"30%\"}}>\n                <FormLabel component=\"legend\" style={{fontSize: \"13px\"}}>Giới tính *</FormLabel>\n                <RadioGroup row aria-label=\"gender\" id=\"gender\" value={citizen.gender} onChange={handleChangeValue}>\n                  <FormControlLabel value=\"male\" control={<Radio />} label=\"Nam\" style={{marginRight: \"10px\"}} />\n                  <FormControlLabel value=\"female\" control={<Radio />} label=\"Nữ\" style={{marginRight: 0}} />\n                </RadioGroup>\n              </FormControl>\n              <MuiPickersUtilsProvider utils={DateFnsUtils}>\n              <DatePicker\n                id=\"dob\" \n                style={{width: \"30%\"}}\n                disableFuture\n                autoOk\n                openTo=\"year\"\n                format=\"dd/MM/yyyy\"\n                label=\"Ngày sinh *\"\n                views={[\"year\", \"month\", \"date\"]}\n                value={citizen.dob}\n                onChange={handleChangeValue}\n              />\n              </MuiPickersUtilsProvider>\n              <TextField\n                error= {er.id_number !== \"\"}\n                helperText = {er.id_number ? er.id_number:\"\"}\n                value={citizen.id_number}\n                style={{width: \"30%\"}}\n                id=\"id_number\" \n                label=\"Số CCCD/CMND\"\n                variant=\"standard\"\n                onChange={handleChangeValue}\n                onBlur={validateId_numberInput}\n                required\n              />\n              </div>\n              <div style={{display: \"flex\", justifyContent: \"space-between\", width: \"100%\", marginTop: \"1.5vh\"}}>\n                <FormControl variant=\"standard\" sx={{ m: 1 }} style={{width: \"30%\"}}>\n                  <InputLabel >Dân tộc *</InputLabel>\n                  <Select\n                  name=\"ethnic\"\n                  value={citizen.ethnic}\n                  label=\"Dân tộc\"\n                  onChange={handleChangeValue}\n                  >\n                  {\n                    Ethnics.map((item, index) => <MenuItem key={index} value={item}>{item}</MenuItem>)\n                  }\n                </Select>\n                </FormControl>\n                <FormControl variant=\"standard\" sx={{ m: 1}} style={{width: \"30%\"}}>\n                <InputLabel >Tôn giáo *</InputLabel>\n                <Select\n                  name=\"religion\"\n                  value={citizen.religion}\n                  label=\"Tôn giáo\"\n                  onChange={handleChangeValue}\n                >\n                {\n                  Religions.map((item, index) => <MenuItem key={index} value={item}>{item}</MenuItem>)\n                }\n                </Select>\n                </FormControl>\n              <FormControl variant=\"standard\" sx={{ m: 1 }} style={{width: \"30%\"}}>\n                <InputLabel >Trình độ học vấn *</InputLabel>\n                <Select\n                  name=\"educational\"\n                  value={citizen.educational}\n                  label=\"Trình độ học vấn\"\n                  onChange={handleChangeValue}\n                >\n                {\n                  LearningLevels.map((item, index) => <MenuItem key={item.value} value={item.value}>{item.name}</MenuItem>)\n                }\n                </Select>\n              </FormControl>\n              </div>\n              <div style={{display: \"flex\", justifyContent: \"space-between\", width: \"100%\", marginTop: \"3vh\"}}>\n              <FormControl variant=\"standard\" sx={{ m: 1 }} style={{width: \"47%\"}}>\n                <InputLabel >Nghề nghiệp *</InputLabel>\n                <Select\n                  name=\"occupations\"\n                  value={citizen.occupations}\n                  label=\"Nghề nghiệp\"\n                  onChange={handleChangeValue}\n                >\n                {\n                  Occupations.map((item, index) => <MenuItem key={index} value={item}>{item}</MenuItem>)\n                }\n                </Select>\n              </FormControl>\n              <FormControl variant=\"standard\" sx={{ m: 1 }} style={{width: \"47%\"}}>\n                <InputLabel >Thôn/Bản/Tổ *</InputLabel>\n                <Select\n                  name=\"village_id\"\n                  value={mapSubAgenciesId(citizen.village_id)}\n                  label=\"Thôn/Bản/Tổ\"\n                  onChange={handleChangeValue}\n                  inputProps={{ \n                    disabled: currentUser.level === \"4\"\n                  }}\n                >\n                {\n                    subAgencies.map((item, index) => <MenuItem key={index} value={item}>{item}</MenuItem>)\n                }\n                </Select>\n              </FormControl>\n              </div>\n              <TextField\n                error= {er.home_town !== \"\"}\n                helperText = {er.home_town ? er.home_town:\"\"}\n                style={{ marginTop: \"3vh\" }}\n                id=\"home_town\"\n                value={citizen.home_town}\n                onChange={handleChangeValue}\n                onBlur={validateHomeTownInput}\n                label=\"Quê quán\"\n                inputProps={{\n                  style: {\n                    fontSize: \"17px\",\n                  }\n                }}\n                fullWidth\n                variant=\"standard\"\n                required\n              />\n              <Autocomplete\n                id=\"free-solo-demo1\"\n                sx={{\n                  '& input': {\n                    height: 22,\n                    fontSize: \"17px\",\n                  },\n                }}\n                freeSolo\n                options={currentUser.agency.stringName? [currentUser.agency.stringName]:[]}\n                inputValue={inputAddress_line1}\n                onInputChange={(event, newInputValue) => {\n                  setInputAddress_line1(newInputValue);\n                }}\n                renderInput={(params) => \n                <TextField \n                  error= {er.address_line1 !== \"\"}\n                  helperText = {er.address_line1 ? er.address_line1:\"\"}\n                  id=\"address_line1\"\n                  style={{ marginTop: \"3vh\" }} \n                  fullWidth\n                  onBlur={validateAddress_line1Input}\n                  variant=\"standard\" {...params} \n                  label=\"Địa chỉ tạm trú\"\n                  required \n                  />}\n              />\n              <Autocomplete\n                id=\"free-solo-demo2\"\n                sx={{\n                  '& input': {\n                    height: 22,\n                    fontSize: \"17px\",\n                  },\n                }}\n                freeSolo\n                options={currentUser.agency.stringName? [currentUser.agency.stringName]:[]}\n                inputValue={inputAddress_line2}\n                onInputChange={(event, newInputValue) => {\n                  setInputAddress_line2(newInputValue);\n                  console.log(newInputValue);\n                }}\n                renderInput={(params) => \n                <TextField \n                  error= {er.address_line2 !== \"\"}\n                  helperText = {er.address_line2 ? er.address_line2:\"\"}\n                  id=\"address_line2\"\n                  style={{ marginTop: \"3vh\" }} \n                  fullWidth\n                  onBlur={validateAddress_line2Input}\n                  variant=\"standard\" {...params} \n                  label=\"Địa chỉ tạm trú\"\n                  required \n                  />}\n              />\n          </form>\n        </ThemeProvider>\n        </DialogContent>\n        <DialogActions>\n          <Button style={{background: \"lightgrey\", color: \"black\"}} onClick={handleResetInput}>Reset</Button>\n          <Button style={{background: \"#2E3192\", color: \"white\", marginLeft: \"10px\"}} type=\"submit\" onClick={handleSubmit}>Thêm</Button>\n        </DialogActions>\n      </Dialog>\n      </div>\n    );\n}\n\nexport default AddCitizen;"]},"metadata":{},"sourceType":"module"}