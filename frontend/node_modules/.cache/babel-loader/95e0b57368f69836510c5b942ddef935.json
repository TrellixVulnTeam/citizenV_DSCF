{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/views/ListCitizens/ListCitizens.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport TableExtra from '../../components/Table/TableExtra';\nimport { TableRow, TableCell, Dialog } from '@mui/material';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { citizen_columns, educational, gender, searchByCitizen } from '../../constants/citizen/citizens';\nimport { loadCitizensAsync } from '../../redux/reducers/citizens/citizens.thunk';\nimport { toggleDeclarePermission } from \"../../api/apiAgencies\";\nimport { useNavigate } from 'react-router';\nimport Button from '@mui/material/Button';\nimport AddCitizen from \"./AddCitizen\";\nimport AddCitizenByCSV from \"./AddCitizenByCSV\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  root: {\n    display: \"block\",\n    background: \"white\",\n    paddingTop: \"15vh\",\n    paddingLeft: \"17.36vw\"\n  },\n  header: {\n    marginBottom: \"2rem\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  }\n};\n\nconst ListCitizens = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    currentUser\n  } = useSelector(state => state.user);\n  /* const declarePermission = toggleDeclarePermission(currentUser.id); */\n\n  const {\n    filterList,\n    citizens\n  } = useSelector(state => state.citizens);\n\n  const filteredListCitizens = (citizens, filterList) => {\n    let filteredCitizens = [];\n    let filterListId = filterList.map(e => e.id);\n    filteredCitizens = citizens.filter(e => {\n      for (let i = 0; i < filterListId.length; i++) {\n        if (e.village_id.search(filterListId[i]) !== -1) {\n          return true;\n        }\n      }\n    });\n    console.log(filteredCitizens);\n    return filteredCitizens;\n  };\n\n  const getAgencyNames = filterList => {\n    let filteredListNames = filterList.map(e => e.name);\n    return filteredListNames.join(\", \");\n  };\n\n  useEffect(() => {\n    if (citizens.length === 0) {\n      dispatch(loadCitizensAsync());\n    } //dispatch(userPersist());\n\n  }, []);\n\n  const renderData = (item, index) => {\n    return /*#__PURE__*/_jsxDEV(TableRow, {\n      onClick: () => navigate(`${item.id}`),\n      hover: true,\n      role: \"checkbox\",\n      tabIndex: -1,\n      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n        children: item.id_number ? item.id_number : \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        children: item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        children: new Date(item.dob).toLocaleDateString('en-GB')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        children: gender[item.gender]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n        children: item.ethnic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-limit\",\n    style: {},\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), currentUser && (currentUser.level === \"4\" || currentUser.level === \"3\") ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(AddCitizen, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(AddCitizenByCSV, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TableExtra, {\n      searchBy: searchByCitizen,\n      title: filterList.length > 0 ? `Danh sách dân số  thuộc: ${getAgencyNames(filterList)}` : `Danh sách dân số  thuộc toàn tỉnh`,\n      name: \"ListCitizensTitles\",\n      columns: citizen_columns,\n      data: filterList.length > 0 ? filteredListCitizens(citizens, filterList) : citizens,\n      renderData: renderData,\n      searchEngine: true,\n      showFilterButton: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ListCitizens, \"+TIjJCEN6+kZOd+2vte/kBSNMsI=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector];\n});\n\n_c = ListCitizens;\nexport default ListCitizens;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListCitizens\");","map":{"version":3,"sources":["/Users/nguyenhuuan/Documents/GitHub/final-web-assignment/src/views/ListCitizens/ListCitizens.js"],"names":["React","useEffect","useState","TableExtra","TableRow","TableCell","Dialog","useSelector","useDispatch","citizen_columns","educational","gender","searchByCitizen","loadCitizensAsync","toggleDeclarePermission","useNavigate","Button","AddCitizen","AddCitizenByCSV","styles","root","display","background","paddingTop","paddingLeft","header","marginBottom","alignItems","justifyContent","ListCitizens","dispatch","navigate","currentUser","state","user","filterList","citizens","filteredListCitizens","filteredCitizens","filterListId","map","e","id","filter","i","length","village_id","search","console","log","getAgencyNames","filteredListNames","name","join","renderData","item","index","id_number","Date","dob","toLocaleDateString","ethnic","level"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport TableExtra from '../../components/Table/TableExtra';\nimport { TableRow, TableCell, Dialog } from '@mui/material';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { citizen_columns, educational, gender, searchByCitizen } from '../../constants/citizen/citizens';\nimport { loadCitizensAsync } from '../../redux/reducers/citizens/citizens.thunk';\nimport { toggleDeclarePermission } from \"../../api/apiAgencies\";\nimport { useNavigate } from 'react-router';\nimport Button from '@mui/material/Button';\nimport AddCitizen from \"./AddCitizen\";\nimport AddCitizenByCSV from \"./AddCitizenByCSV\";\n\nconst styles = {\n    root: {\n        display: \"block\",\n        background: \"white\",\n        paddingTop: \"15vh\",\n        paddingLeft: \"17.36vw\"\n    },\n    header: {\n        marginBottom: \"2rem\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n    }\n};\n\nconst ListCitizens = () => {\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const {currentUser} = useSelector(state => state.user);\n    /* const declarePermission = toggleDeclarePermission(currentUser.id); */\n    const { filterList, citizens } = useSelector(state => state.citizens);\n    \n    const filteredListCitizens = (citizens, filterList) => {\n        let filteredCitizens = [];\n        let filterListId = filterList.map(e => e.id);\n        filteredCitizens = citizens.filter(e => {\n            for(let i = 0 ; i<filterListId.length ; i++){\n                if(e.village_id.search(filterListId[i]) !== -1){\n                    return true;\n                }\n            }\n        });\n        console.log(filteredCitizens);\n        return filteredCitizens;\n    }\n    const getAgencyNames = (filterList) => {\n        let filteredListNames = filterList.map(e => e.name);\n        return filteredListNames.join(\", \");\n    }\n    useEffect(() => {\n        if (citizens.length === 0) {\n            dispatch(loadCitizensAsync());\n        }\n        //dispatch(userPersist());\n    }, []);\n    const renderData = (item, index) => {\n        return (\n            <TableRow onClick={() => navigate(`${item.id}`)} key={index} hover role=\"checkbox\" tabIndex={-1} >\n                <TableCell>{item.id_number? item.id_number: \"-\"}</TableCell>\n                <TableCell>{item.name}</TableCell>\n                <TableCell>{new Date(item.dob).toLocaleDateString('en-GB')}</TableCell>\n                <TableCell>{gender[item.gender]}</TableCell>\n                <TableCell>{item.ethnic}</TableCell>\n                {/* <TableCell>{item.religion? item.religion: \"-\"}</TableCell>\n                <TableCell>{educational[item.educational]}</TableCell> */}\n                {/* <TableCell>{item.occupations? item.occupations: \"-\" }</TableCell> */}\n                {/* <TableCell>{item.home_town? item.home_town: \"-\"}</TableCell> */}\n                {/* <TableCell>{item.address_line1? item.address_line1: \"-\"}</TableCell> */}\n                {/* <TableCell>{item.address_line2? item.address_line2: \"-\"}</TableCell>             */}\n            </TableRow>\n        )\n    }\n\n    return (\n        <div className=\"page-limit\" style={{}}>\n            <div style={styles.header}>\n                <div></div>\n                {\n                    currentUser && (currentUser.level === \"4\" || currentUser.level === \"3\")? (\n                        <div style={{display:\"flex\"}}>\n                            <AddCitizen/>\n                            <AddCitizenByCSV/>\n                        </div>\n                    ):null\n                }\n            </div>\n            <TableExtra\n                searchBy = {searchByCitizen}\n                title = {filterList.length > 0 ? `Danh sách dân số  thuộc: ${getAgencyNames(filterList)}` : `Danh sách dân số  thuộc toàn tỉnh`}\n                name=\"ListCitizensTitles\"\n                columns = {citizen_columns}\n                data = {filterList.length > 0 ? filteredListCitizens(citizens, filterList) : citizens}\n                renderData = {renderData}\n                searchEngine = {true}\n                showFilterButton = {true}\n            />\n        </div>\n    )\n}\n\nexport default ListCitizens;"]},"metadata":{},"sourceType":"module"}